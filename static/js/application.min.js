!function(){"use strict";google.charts.load("current",{packages:["corechart"]}),angular.module("gulm",["ui.router","gulm.controllers","gulm.services","gulm.battle.controllers"]).config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/home"),$stateProvider.state("home",{url:"/home",templateUrl:"templates/home.html"}).state("user",{url:"/user/{username}",templateUrl:"templates/user.html",controller:"userController"}).state("battle",{url:"/battle/{username1}/{username2}",templateUrl:"templates/battle.html",controller:"battleController"})})}(),function(){"use strict";function userControllerFn($scope,$stateParams,github,$state){function convertToRows(){var data=[];for(var i in $scope.mastering)data.push([i,$scope.mastering[i]]);return data}function drawChart(){var data=new google.visualization.DataTable;data.addColumn("string","Language"),data.addColumn("number","Lines"),data.addRows(convertToRows());var options={title:"Language Mastering of "+$stateParams.username,pieHole:.4,height:400},chart=new google.visualization.PieChart(document.getElementById("chart_div"));chart.draw(data,options)}$scope.username=$stateParams.username,$scope.mastering={},$scope.getLanguages=function(repo){github($stateParams.username).languageData(repo.name).then(function(response){if(200===response.status){repo.languages="";for(var i in response.data)void 0===$scope.mastering[i]&&($scope.mastering[i]=0),$scope.mastering[i]+=response.data[i],repo.languages+=i+", ";drawChart()}})},github($stateParams.username).repos.then(function(response){200===response.status&&($scope.repos=response.data)},function(){$state.go("home")})}angular.module("gulm.controllers",["gulm.services"]).controller("userController",["$scope","$stateParams","github","$state",userControllerFn])}(),function(){"use strict";function githubFn($http){return function(username){function getReposFn(){return $http.get("https://api.github.com/users/"+username+"/repos"+urlAuth)}function getLanguageData(repo){return $http.get("https://api.github.com/repos/"+username+"/"+repo+"/languages"+urlAuth)}return{repos:getReposFn(),languageData:getLanguageData}}}var clientId="2430f6b849b9be6535e8",clientSecret="b04f589142c9eac14a060e7d48392a7481a2334e",urlAuth="?client_id="+clientId+"&client_secret="+clientSecret;angular.module("gulm.services",[]).factory("github",["$http",githubFn])}(),function(){"use strict";function battleControllerFn($scope,$stateParams,github,$state){function convertToRows(user){var data=[];for(var i in $scope.users[user].mastering)data.push([i,$scope.users[user].mastering[i]]);return data}function drawChart(user){var data=new google.visualization.DataTable;data.addColumn("string","Language"),data.addColumn("number","Lines"),data.addRows(convertToRows(user));var options={title:"Language Mastering of "+$scope.users[user].username,pieHole:.4,height:400},chart=new google.visualization.PieChart(document.getElementById("chart_div"+user));chart.draw(data,options)}$scope.users=[{username:$stateParams.username1,repos:[],lines:0,mastering:{},languages:0},{username:$stateParams.username2,repos:[],lines:0,mastering:{},languages:0}],$scope.getLanguages=function(user,repo){github($scope.users[user].username).languageData(repo.name).then(function(response){if(200===response.status){repo.languages="";for(var i in response.data)void 0===$scope.users[user].mastering[i]&&($scope.users[user].mastering[i]=0,$scope.users[user].languages+=1),$scope.users[user].mastering[i]+=response.data[i],$scope.users[user].lines+=response.data[i],repo.languages+=i+", ";drawChart(user)}})},$scope.users.forEach(function(user,index){github(user.username).repos.then(function(response){200===response.status&&($scope.users[index].repos=response.data)},function(){$state.go("home")})})}angular.module("gulm.battle.controllers",["gulm.services"]).controller("battleController",["$scope","$stateParams","github","$state",battleControllerFn])}();
//# sourceMappingURL=application.min.js.map